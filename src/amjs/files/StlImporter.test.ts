import StlImporter from './StlImporter'

test('It can import STL files', (done) => {
    const stlImporter = new StlImporter()
    const fileMock = 'data:application/octet-stream;base64,c29saWQgbW9kZWwKZmFjZXQgbm9ybWFsIDAuMCAwLjAgLTEuMApvdXRlciBsb29wCnZlcnRleCAyMC4wIDAuMCAwLjAKdmVydGV4IDAuMCAtMjAuMCAwLjAKdmVydGV4IDAuMCAwLjAgMC4wCmVuZGxvb3AKZW5kZmFjZXQKZmFjZXQgbm9ybWFsIDAuMCAwLjAgLTEuMApvdXRlciBsb29wCnZlcnRleCAwLjAgLTIwLjAgMC4wCnZlcnRleCAyMC4wIDAuMCAwLjAKdmVydGV4IDIwLjAgLTIwLjAgMC4wCmVuZGxvb3AKZW5kZmFjZXQKZmFjZXQgbm9ybWFsIC0wLjAgLTEuMCAtMC4wCm91dGVyIGxvb3AKdmVydGV4IDIwLjAgLTIwLjAgMjAuMAp2ZXJ0ZXggMC4wIC0yMC4wIDAuMAp2ZXJ0ZXggMjAuMCAtMjAuMCAwLjAKZW5kbG9vcAplbmRmYWNldApmYWNldCBub3JtYWwgLTAuMCAtMS4wIC0wLjAKb3V0ZXIgbG9vcAp2ZXJ0ZXggMC4wIC0yMC4wIDAuMAp2ZXJ0ZXggMjAuMCAtMjAuMCAyMC4wCnZlcnRleCAwLjAgLTIwLjAgMjAuMAplbmRsb29wCmVuZGZhY2V0CmZhY2V0IG5vcm1hbCAxLjAgMC4wIDAuMApvdXRlciBsb29wCnZlcnRleCAyMC4wIDAuMCAwLjAKdmVydGV4IDIwLjAgLTIwLjAgMjAuMAp2ZXJ0ZXggMjAuMCAtMjAuMCAwLjAKZW5kbG9vcAplbmRmYWNldApmYWNldCBub3JtYWwgMS4wIDAuMCAwLjAKb3V0ZXIgbG9vcAp2ZXJ0ZXggMjAuMCAtMjAuMCAyMC4wCnZlcnRleCAyMC4wIDAuMCAwLjAKdmVydGV4IDIwLjAgMC4wIDIwLjAKZW5kbG9vcAplbmRmYWNldApmYWNldCBub3JtYWwgLTAuMCAtMC4wIDEuMApvdXRlciBsb29wCnZlcnRleCAyMC4wIC0yMC4wIDIwLjAKdmVydGV4IDAuMCAwLjAgMjAuMAp2ZXJ0ZXggMC4wIC0yMC4wIDIwLjAKZW5kbG9vcAplbmRmYWNldApmYWNldCBub3JtYWwgLTAuMCAtMC4wIDEuMApvdXRlciBsb29wCnZlcnRleCAwLjAgMC4wIDIwLjAKdmVydGV4IDIwLjAgLTIwLjAgMjAuMAp2ZXJ0ZXggMjAuMCAwLjAgMjAuMAplbmRsb29wCmVuZGZhY2V0CmZhY2V0IG5vcm1hbCAtMS4wIDAuMCAwLjAKb3V0ZXIgbG9vcAp2ZXJ0ZXggMC4wIDAuMCAyMC4wCnZlcnRleCAwLjAgLTIwLjAgMC4wCnZlcnRleCAwLjAgLTIwLjAgMjAuMAplbmRsb29wCmVuZGZhY2V0CmZhY2V0IG5vcm1hbCAtMS4wIDAuMCAwLjAKb3V0ZXIgbG9vcAp2ZXJ0ZXggMC4wIC0yMC4wIDAuMAp2ZXJ0ZXggMC4wIDAuMCAyMC4wCnZlcnRleCAwLjAgMC4wIDAuMAplbmRsb29wCmVuZGZhY2V0CmZhY2V0IG5vcm1hbCAtMC4wIDEuMCAwLjAKb3V0ZXIgbG9vcAp2ZXJ0ZXggMC4wIDAuMCAyMC4wCnZlcnRleCAyMC4wIDAuMCAwLjAKdmVydGV4IDAuMCAwLjAgMC4wCmVuZGxvb3AKZW5kZmFjZXQKZmFjZXQgbm9ybWFsIC0wLjAgMS4wIDAuMApvdXRlciBsb29wCnZlcnRleCAyMC4wIDAuMCAwLjAKdmVydGV4IDAuMCAwLjAgMjAuMAp2ZXJ0ZXggMjAuMCAwLjAgMjAuMAplbmRsb29wCmVuZGZhY2V0CmVuZHNvbGlkIG1vZGVsCg=='
    stlImporter.onMeshImported.connect(() => done())
    stlImporter.load(fileMock)
})

test('It prevents importing faulty STL files', (done) => {
    const stlImporter = new StlImporter()
    const fileMock = 'data:application/octet-stream;base64,c29saWQgbW9kZWwKZmFjZXQg'
    stlImporter.onMeshError.connect(() => done())
    stlImporter.load(fileMock)
})
